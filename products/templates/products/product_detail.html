{% extends 'base.html' %}
{% load static %}

{% block extra_title %}
| {{ product.name }}
{% endblock %}

{% block page_header %}
<div class="container-fluid text-center">
    <h2 class="mt-2">{{ product.name }}</h2>
    <hr class="w-50">
</div>
{% endblock %}

{% block content %}
<div class="container text-center">
    <div class="row">
        <div class="col-12 col-md-6">
            <div class="card image-card border-0">
                {% if product.image %}
                <img src="{{ MEDIA_URL }}{{ product.image }}" alt="{{ product.name }}" class="p-4">
                {% else %}
                <img src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}" class="p-4">
                {% endif %}
            </div>
        </div>
        <div class="col-12 col-md-6">
            <div class="product-info px-4 p-md-4">
                <h3>Â£{{ product.price|floatformat:2 }}</h3>
                <p>{{ product.description }}</p>
                <p>
                    <a href="{% url 'products' %}?category={{ product.sub_category.category.name }}">{{ product.sub_category.category.friendly_name }}</a> / 
                    <a href="{% url 'products' %}?sub_category={{ product.sub_category.name }}">{{ product.sub_category.friendly_name }}</a>
                </p>
                {% if product.brand %}
                <p>
                    <a href="{% url 'products' %}?brand={{ product.brand.name }}">{{ product.brand.friendly_name }}</a>
                </p>
                {% endif %}
                <form action="" method="POST" class="form">
                    {% csrf_token %}
                    <div class="input-group justify-content-center">
                        <div class="qty-group my-2">
                            <div class="btn btn-light minus">
                                <span class="icon">
                                    <i class="fas fa-minus"></i>
                                </span>
                            </div>
                            <input type="number" value="1" min="1" max="99" name="quantity" class="rounded-0 qty" data-item_id="{{ product.id }}" id="{{ product.id }}">
                            <div class="btn btn-light plus">
                                <span class="icon">
                                    <i class="fas fa-plus"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-lg-6 order-lg-last">
                            <button type="submit" class="btn btn-dark my-2">
                                Add to Basket
                                <span class="icon">
                                    <i class="fas fa-basket-shopping"></i>
                                </span>
                            </button>
                        </div>
                        <div class="col-12 col-lg-6 order-lg-first">
                            <a href="{% url 'products' %}" class="btn btn-accent my-2">
                                <span class="icon">
                                    <i class="fas fa-chevron-left"></i>
                                </span>
                                Keep Shopping
                            </a>
                        </div>
                    </div>
                    <input type="hidden" name="redirect_url" value="{{ request.path }}">
                </form>
            </div>
        </div>
    </div>
    <div class="row">
        {% if product.brand %}
        <div class="col-12 col-md-6">
            <h4>{{ product.brand.friendly_name }}</h4>
            <p>{{ product.brand.description }}</p>
        </div>
        <div class="col-12 col-md-6">
            {% for rel_prod in related_products %}
            {{ rel_prod.name }}

            {% empty %}
            None
            {% endfor %}
        </div>
        {% else %}
        <div class="col-12 col-md-6 offset-md-3">
            Middle
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}